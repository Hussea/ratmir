<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹</title>
     {% extends "try.html" %}
  {% block page_css %}
    <style>
    body {
      font-family: "Poppins", Arial, sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    /* ====== RESPONSIVE ====== */
    @media (max-width: 768px) {
      .menu-toggle {
        display: flex;
      }
    }
        
        ul {
            list-style-type: none;
            padding-left: 0;
        }

        li {
            margin: 10px 30px;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #ddd;
        }

         

        button {
            background-color: #0600be;
            color: #ffffff;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-left: 8px;
        }
 
    </style>
    {% endblock %}

</head>
<body>
    {% block content %}
<center>
  <h2>Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹</h2>
</center>
<ul id="categoryList">
    <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ -->
</ul>

<script>
  async function fetchCategories() {
    try {
        const response = await fetch(`/get_admin`);
        const data = await response.json();

        const list = document.getElementById('categoryList');
        list.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‚Ø¨Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

       if (data.username && data.password && data.role && Array.isArray(data.username)) {
      list.innerHTML = ""; // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹

      data.idu.forEach((idu, index) => {
        const username = data.username[index];
        const password = data.password[index];
        const role = data.role[index];

        const li = document.createElement('li');
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø²Ø±
        const copyButton = document.createElement('button');
        copyButton.textContent = "ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ";
         
        
        const span = document.createElement('span');
        span.textContent = username;

        const span1 = document.createElement('span');
        span1.textContent = password;
        // ØªØ¨Ø¯ÙŠÙ„ Ù‚ÙŠÙ…Ù‡ Ø§Ù„Ø±ÙˆÙ„ Ø§Ù„ØªÙŠ ØªØ§ØªÙŠ Ù…Ù† Ø«Ø§Ø¹Ø¯Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ùƒ
        const roleNames = {
          admin: "Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€",
          supadmin: "Ğ—Ğ°Ğ¼. Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ°",
          emp: "Ğ‘ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€"
          };

        const span2 = document.createElement('span');
        span2.textContent = roleNames[role] || "Ğ‘ĞµĞ· Ñ€Ğ¾Ğ»Ğ¸";
        // Ù†Ù‡Ø§ÙŠÙ‡


        const button1 = document.createElement('button');
button1.textContent = "Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ"; 
button1.style.backgroundColor = "red";
button1.style.color = "white";

button1.onclick = async () => {
  if (!confirm("Ğ’Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½Ñ‹, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ?")) return;

  try {
    const response = await fetch(`/delet_admin?idu=${idu}`, {
  method: "GET"
   });


    const data = await response.json();
    alert(data.message);

    // Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    button1.closest("li").remove();

  } catch (error) {
    console.error("ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğ¸:", error);
    alert("âŒĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº ÑĞµÑ€Ğ²ĞµÑ€Ñƒ.");
  }
};


        const rightSide = document.createElement('div');
        rightSide.appendChild(button1);
        rightSide.appendChild(copyButton);
 

        //  Ø§Ù„Ø²Ø± Ø§Ù„Ù†Ø³Ø®
        copyButton.onclick = () => {
            const textToCopy1 = span.textContent;
            const textToCopy2 = span1.textContent;
            

          const textToCopy = `Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:- ${textToCopy1}\nĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ:- ${textToCopy2}`;
          
         navigator.clipboard.writeText(textToCopy)
            .then(() => {
               // ğŸ”¹ ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
                li.style.backgroundColor ="#7bed9f"; 
                setTimeout(() => {
                li.style.backgroundColor = ""; // ÙŠØ±Ø¬Ø¹ Ø§Ù„Ù„ÙˆÙ† Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø©
                }, 300); // 1000 Ù…Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© = 1 Ø«Ø§Ù†ÙŠØ©

            })
            .catch(err => {
              console.error("ĞÑˆĞ¸Ğ±ĞºĞ° ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:", err);
            });
        };

        li.appendChild(span);
        li.appendChild(span1);
        li.appendChild(span2);
        li.appendChild(rightSide);
        list.appendChild(li);
      });
    } else {
      list.innerHTML = "<li>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª.</li>";
    }
  } catch (error) {
    console.error("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error);
  }
}

fetchCategories();

</script>
<!-- JAVASCRIPT -->
  <script>
    const menuToggle = document.getElementById("menuToggle");
    const navList = document.getElementById("navList");
    const navLinks = document.querySelectorAll(".navbar li a");

    menuToggle.addEventListener("click", () => {
      navList.classList.toggle("active");
    });

    // Change active link when clicked
    navLinks.forEach(link => {
      link.addEventListener("click", () => {
        navLinks.forEach(l => l.classList.remove("active"));
        link.classList.add("active");
      });
    });
  </script>
  {% endblock %}

</body>
</html>
<script>
  let role = sessionStorage.getItem("role");
                if (role === "admin") {
                   
                } else if(role === "supadmin") {
                  
                }else if(role === "emp") {
                 document.getElementById("QRBUT").style.display = "none";
                }else if (!role) {  // Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ø°ÙŠ Ø£Ø¶ÙØªÙ‡ Ø£Ù†Øª
                    window.location.href = "/log_in";
                }
</script>