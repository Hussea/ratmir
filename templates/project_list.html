<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²</title>
    {% extends "try.html" %}
  {% block page_css %}
    <style>
    /* ====== Variables (same style as previous pages) ====== */
:root {
  --primary: #0f172a;
  --secondary: #1e293b;
  --accent: #2563eb;
  --success: #16a34a;
  --danger: #dc2626;
  --bg: #f1f5f9;
  --card: #ffffff;
}

/* ====== Page Base ====== */
body {
  background: var(--bg);
  font-family: "Segoe UI", Tahoma, Arial, sans-serif;
  color: #111;
}

/* ====== Page Title ====== */
h2 {
  margin: 30px 0 20px;
  font-size: 26px;
  font-weight: 600;
  color: var(--primary);
}

/* ====== Project List ====== */
#categoryList {
  max-width: 1100px;
  margin: 0 auto 40px;
  padding: 0 16px;
  list-style: none;
}

/* ====== Project Card ====== */
#categoryList li {
  background: var(--card);
  border-radius: 14px;
  padding: 18px 22px;
  margin-bottom: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.05);
  border-left: 6px solid var(--accent);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

#categoryList li:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.08);
}

/* ====== Project Name ====== */
#categoryList li span {
  font-size: 17px;
  font-weight: 500;
  color: var(--secondary);
  word-break: break-word;
}

/* ====== Buttons Container ====== */
#categoryList li div {
  display: flex;
  gap: 10px;
}

/* ====== Buttons ====== */
#categoryList button {
  border: none;
  padding: 9px 16px;
  font-size: 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.15s ease;
  color: #fff;
  white-space: nowrap;
}

#categoryList button:hover {
  transform: scale(1.04);
}

/* Info button */
#categoryList button:first-child {
  background: var(--accent);
}

/* QR button */
#categoryList button:last-child {
  background: var(--secondary);
}

/* ====== Responsive (Tablet & Mobile) ====== */
@media (max-width: 768px) {

  h2 {
    font-size: 22px;
  }

  #categoryList li {
    flex-direction: column;
    align-items: flex-start;
    gap: 14px;
  }

  #categoryList li div {
    width: 100%;
    justify-content: center;
  }

  #categoryList button {
    width: 100%;
    font-size: 15px;
  }
}

/* ====== Small Phones ====== */
@media (max-width: 480px) {

  #categoryList li {
    padding: 16px;
  }

  #categoryList li span {
    font-size: 16px;
    text-align: center;
    width: 100%;
  }

  #categoryList li div {
    flex-direction: column;
  }
}
    </style>
    {% endblock %}
</head>
<body>
 <!--bar show start -->
<!--<script src="/static/js/header.js" defer></script> -->
{% block content %}


<!--bar show end -->


<center>
  <h2>Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²</h2>
</center>
<ul id="categoryList">
    <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ -->
</ul>

<script>
  async function fetchCategories() {
    try {
        const response = await fetch(`/get-categories`);
        const data = await response.json();

        const list = document.getElementById('categoryList');
        list.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‚Ø¨Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

        if (data.titles && data.is_active && Array.isArray(data.titles)) {
            data.titles.forEach((title, index) => {
                const li = document.createElement('li');
                const isActive = data.is_active[index] === 1;


                // ğŸ”¹ ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
                li.style.backgroundColor = isActive ? "#dfe4ea" : "#d44242"; 
                // Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ Ù„Ù„Ù†Ø´Ø·ØŒ Ø±Ù…Ø§Ø¯ÙŠ Ù„ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·

                // Ø§Ù„Ù†Øµ
                const span = document.createElement('span');
                span.textContent = title  ;

                // Ø§Ù„Ø²Ø± Ø§Ù„Ø£ÙˆÙ„: Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                const button1 = document.createElement('button');
                button1.textContent = "Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ";
                 
                button1.onclick = () => {
                    const url = `/show_project?title=${encodeURIComponent(title)}`;
                    window.location.href = url;
                };

                // Ø§Ù„Ø²Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ: ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ù…Ø²
                const button2 = document.createElement('button');
                button2.textContent = "Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QR-ĞºĞ¾Ğ´";
                button2.style.backgroundColor = "#0056b3";
                button2.id = "QRBUT";
                button2.onclick = () => {
                    const url = `/work_shift?title=${encodeURIComponent(title)}`;
                    window.location.href = url;
                };

                // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ø¹ Ø§Ù„Ù†Øµ
                const rightSide = document.createElement('div');
                rightSide.appendChild(button1);
                rightSide.appendChild(button2);

                li.appendChild(span);
                li.appendChild(rightSide);
                list.appendChild(li);
            });
        } else {
            list.innerHTML = "<li>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª.</li>";
        }
    } catch (error) {
        console.error("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error);
    }
}

fetchCategories();

</script>
<!-- JAVASCRIPT -->
  <script>
    const menuToggle = document.getElementById("menuToggle");
    const navList = document.getElementById("navList");
    const navLinks = document.querySelectorAll(".navbar li a");

    menuToggle.addEventListener("click", () => {
      navList.classList.toggle("active");
    });

    // Change active link when clicked
    navLinks.forEach(link => {
      link.addEventListener("click", () => {
        navLinks.forEach(l => l.classList.remove("active"));
        link.classList.add("active");
      });
    });
  </script>
  {% endblock %}
</body>
</html>
<script>  
  let role = sessionStorage.getItem("role");
                if (role === "admin") {
                   
                } else if(role === "supadmin") {
                  
                }else if(role === "emp") {
                 document.getElementById("QRBUT").style.display = "none";
                }else if (!role) {  // Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ø°ÙŠ Ø£Ø¶ÙØªÙ‡ Ø£Ù†Øª
                    window.location.href = "/log_in";
                } 
</script>